using Spectre.Console;

class Program
{
    static void Main(string[] args)
    {
        var table = new Table();

        Console.Write("Ingresa el monto del préstamo: ");
        decimal montoPrestamo = decimal.Parse(Console.ReadLine()!);

        Console.Write("Ingresa el interés anual (%): ");
        decimal interesAnual = decimal.Parse(Console.ReadLine()!);

        Console.Write("Ingresa el plazo del préstamo (meses): ");
        int plazoPrestamo = int.Parse(Console.ReadLine()!);

        decimal interesMensual = (interesAnual / 100) / 12;

        decimal n = (decimal)Math.Pow(1 + (double)interesMensual, plazoPrestamo);
        decimal cuotaFija = montoPrestamo * (interesMensual * n) / (n - 1);

        table.Border = TableBorder.Rounded;
        table.AddColumn("No. Cuota");
        table.AddColumn("Cuota");
        table.AddColumn("Interés");
        table.AddColumn("Capital");
        table.AddColumn("Saldo");

        decimal saldo = montoPrestamo;

        for (int i = 1; i <= plazoPrestamo; i++)
        {
            decimal interes = saldo * interesMensual;
            decimal abonoCapital = cuotaFija - interes;
            saldo -= abonoCapital;

            if (saldo < 0)
                saldo = 0;

            table.AddRow(
                i.ToString(),
                cuotaFija.ToString("F2"),
                interes.ToString("F2"),
                abonoCapital.ToString("F2"),
                saldo.ToString("F2")
            );
        }

        AnsiConsole.Write(table);
    }
}
